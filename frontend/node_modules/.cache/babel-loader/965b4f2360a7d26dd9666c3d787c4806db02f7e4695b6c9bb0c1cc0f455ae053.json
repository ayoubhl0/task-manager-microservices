{"ast":null,"code":"// src/services/authService.js\nconst API_URL = 'http://localhost:3001';\n\n// Fonction utilitaire pour les appels API\nconst apiRequest = async (endpoint, options = {}) => {\n  const defaultOptions = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    credentials: 'include'\n  };\n  const finalOptions = {\n    ...defaultOptions,\n    ...options\n  };\n  try {\n    const response = await fetch(`${API_URL}${endpoint}`, finalOptions);\n    const data = await response.json();\n    if (!response.ok) {\n      // Log l'erreur pour debug\n      console.error(`API Error [${endpoint}]:`, {\n        status: response.status,\n        statusText: response.statusText,\n        data\n      });\n      throw new Error(data.error || data.message || `HTTP ${response.status}`);\n    }\n    return data;\n  } catch (error) {\n    console.error(`Fetch Error [${endpoint}]:`, error.message);\n    throw error;\n  }\n};\nexport const authService = {\n  async register(userData) {\n    var _userData$password;\n    console.log('ðŸ“¤ Envoi inscription:', {\n      username: userData.username,\n      email: userData.email,\n      passwordLength: (_userData$password = userData.password) === null || _userData$password === void 0 ? void 0 : _userData$password.length\n    });\n    return apiRequest('/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  },\n  async login(credentials) {\n    var _credentials$password;\n    console.log('ðŸ“¤ Envoi connexion:', {\n      email: credentials.email,\n      passwordLength: (_credentials$password = credentials.password) === null || _credentials$password === void 0 ? void 0 : _credentials$password.length\n    });\n    return apiRequest('/login', {\n      method: 'POST',\n      body: JSON.stringify(credentials)\n    });\n  },\n  async verifyToken(token) {\n    return apiRequest('/verify', {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n  },\n  async getUsers() {\n    return apiRequest('/users');\n  }\n};","map":{"version":3,"names":["API_URL","apiRequest","endpoint","options","defaultOptions","headers","credentials","finalOptions","response","fetch","data","json","ok","console","error","status","statusText","Error","message","authService","register","userData","_userData$password","log","username","email","passwordLength","password","length","method","body","JSON","stringify","login","_credentials$password","verifyToken","token","getUsers"],"sources":["C:/Users/ayoub/Desktop/task-manager-microservices - Copie/frontend/src/services/authService.js"],"sourcesContent":["// src/services/authService.js\r\nconst API_URL = 'http://localhost:3001';\r\n\r\n// Fonction utilitaire pour les appels API\r\nconst apiRequest = async (endpoint, options = {}) => {\r\n  const defaultOptions = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    },\r\n    credentials: 'include',\r\n  };\r\n\r\n  const finalOptions = { ...defaultOptions, ...options };\r\n\r\n  try {\r\n    const response = await fetch(`${API_URL}${endpoint}`, finalOptions);\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      // Log l'erreur pour debug\r\n      console.error(`API Error [${endpoint}]:`, {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        data\r\n      });\r\n      \r\n      throw new Error(data.error || data.message || `HTTP ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  } catch (error) {\r\n    console.error(`Fetch Error [${endpoint}]:`, error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const authService = {\r\n  async register(userData) {\r\n    console.log('ðŸ“¤ Envoi inscription:', { \r\n      username: userData.username, \r\n      email: userData.email,\r\n      passwordLength: userData.password?.length \r\n    });\r\n    \r\n    return apiRequest('/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n  },\r\n\r\n  async login(credentials) {\r\n    console.log('ðŸ“¤ Envoi connexion:', { \r\n      email: credentials.email,\r\n      passwordLength: credentials.password?.length \r\n    });\r\n    \r\n    return apiRequest('/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify(credentials),\r\n    });\r\n  },\r\n\r\n  async verifyToken(token) {\r\n    return apiRequest('/verify', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n      },\r\n    });\r\n  },\r\n\r\n  async getUsers() {\r\n    return apiRequest('/users');\r\n  }\r\n};"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAG,uBAAuB;;AAEvC;AACA,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACnD,MAAMC,cAAc,GAAG;IACrBC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGF,OAAO,CAACE;IACb,CAAC;IACDC,WAAW,EAAE;EACf,CAAC;EAED,MAAMC,YAAY,GAAG;IAAE,GAAGH,cAAc;IAAE,GAAGD;EAAQ,CAAC;EAEtD,IAAI;IACF,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGT,OAAO,GAAGE,QAAQ,EAAE,EAAEK,YAAY,CAAC;IACnE,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;MAChB;MACAC,OAAO,CAACC,KAAK,CAAC,cAAcZ,QAAQ,IAAI,EAAE;QACxCa,MAAM,EAAEP,QAAQ,CAACO,MAAM;QACvBC,UAAU,EAAER,QAAQ,CAACQ,UAAU;QAC/BN;MACF,CAAC,CAAC;MAEF,MAAM,IAAIO,KAAK,CAACP,IAAI,CAACI,KAAK,IAAIJ,IAAI,CAACQ,OAAO,IAAI,QAAQV,QAAQ,CAACO,MAAM,EAAE,CAAC;IAC1E;IAEA,OAAOL,IAAI;EACb,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,gBAAgBZ,QAAQ,IAAI,EAAEY,KAAK,CAACI,OAAO,CAAC;IAC1D,MAAMJ,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMK,WAAW,GAAG;EACzB,MAAMC,QAAQA,CAACC,QAAQ,EAAE;IAAA,IAAAC,kBAAA;IACvBT,OAAO,CAACU,GAAG,CAAC,uBAAuB,EAAE;MACnCC,QAAQ,EAAEH,QAAQ,CAACG,QAAQ;MAC3BC,KAAK,EAAEJ,QAAQ,CAACI,KAAK;MACrBC,cAAc,GAAAJ,kBAAA,GAAED,QAAQ,CAACM,QAAQ,cAAAL,kBAAA,uBAAjBA,kBAAA,CAAmBM;IACrC,CAAC,CAAC;IAEF,OAAO3B,UAAU,CAAC,WAAW,EAAE;MAC7B4B,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACX,QAAQ;IAC/B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMY,KAAKA,CAAC3B,WAAW,EAAE;IAAA,IAAA4B,qBAAA;IACvBrB,OAAO,CAACU,GAAG,CAAC,qBAAqB,EAAE;MACjCE,KAAK,EAAEnB,WAAW,CAACmB,KAAK;MACxBC,cAAc,GAAAQ,qBAAA,GAAE5B,WAAW,CAACqB,QAAQ,cAAAO,qBAAA,uBAApBA,qBAAA,CAAsBN;IACxC,CAAC,CAAC;IAEF,OAAO3B,UAAU,CAAC,QAAQ,EAAE;MAC1B4B,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC1B,WAAW;IAClC,CAAC,CAAC;EACJ,CAAC;EAED,MAAM6B,WAAWA,CAACC,KAAK,EAAE;IACvB,OAAOnC,UAAU,CAAC,SAAS,EAAE;MAC3B4B,MAAM,EAAE,KAAK;MACbxB,OAAO,EAAE;QACP,eAAe,EAAE,UAAU+B,KAAK;MAClC;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,QAAQA,CAAA,EAAG;IACf,OAAOpC,UAAU,CAAC,QAAQ,CAAC;EAC7B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}